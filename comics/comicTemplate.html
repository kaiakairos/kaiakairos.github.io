<!DOCTYPE html>
<html style="background-image:url(../images/bg.gif);animation-name: none;">
<head>

<title>COMIC TITLE</title> <!-- sets tab name -->
<link rel="icon" type="image/jpg" href="images/icon.png"> <!-- sets tab icon -->
<link href="../styleSheet.css" rel="stylesheet" type="text/css" media="all"> <!-- gets css -->

</head>

<script>
var page = 0;
var amountOfPages = 4;
var comicFolder = "testComic";

var fitWidth = 0;
var filter = 0;

function nextPage() {
	page++;
	if (page == amountOfPages) { page--; }
	document.getElementById("comicImage").src = "comicPages/" + comicFolder + "/" + page.toString() + ".png";
	updateText()
}

function lastPage() {
	page--;
	if (page == -1) { page++; }
	document.getElementById("comicImage").src = "comicPages/" + comicFolder + "/" + page.toString() + ".png";
	updateText()
}

function goToPage(pageToGoTo) {
	if (pageToGoTo < 0){ pageToGoTo = 0; }
	if (pageToGoTo >= amountOfPages){ pageToGoTo = amountOfPages-1; }
	document.getElementById("comicImage").src = "comicPages/" + comicFolder + "/" + pageToGoTo.toString() + ".png";
	page = pageToGoTo;
	updateText()
}

function updateText() {
	var truePage = page + 1;
	var gay = new URL(window.location.href);
	gay.hash = "";
	window.location.replace(gay + "#" + truePage.toString());
	document.getElementById("pageNumberText").textContent="page " + truePage.toString() + " / " + amountOfPages.toString();
	document.getElementById("pageJump").value = truePage;
	window.scrollTo(0, 0);
}

function updateSettings(){
	var newStyle = "";
	
	if(fitWidth == 1){ newStyle = newStyle + "width:100%;min-height:840px;"; }
	if(fitWidth == 0){ newStyle = newStyle + "height:840px;"; }
	if(filter == 1){ newStyle = newStyle + "image-rendering: auto;"; }
	
	document.getElementById("comicImage").style = newStyle;
}

function toggleFitWidth(){
	fitWidth = Math.abs(fitWidth - 1);
	updateSettings()
}

function toggleFilter(){
	filter = Math.abs(filter - 1);
	updateSettings()
}

window.onload = function(){
	const result = location.hash.substring(1);
	if(result.length > 0){
		var pageInt = parseInt(result);
		page = pageInt - 1;
	}
	goToPage(page);
	document.getElementById("pageJump").max = amountOfPages;
	
	 function moveNavigationBox() {
		 var w = 20;
		 var h = 20;
		 var balls = window.scrollY + h;
		 document.getElementById("navBox").style.transform = "translate(" + w + "px," + balls.toString() + "px)";
     }
     setInterval(moveNavigationBox, 10);
	 updateSettings()
	
}

function goHomeDeterminer(){
	var previous = document.referrer.hostname;
	var currentDomain = window.location.hostname;
	
	if (previous === currentDomain){
		history.back(); // go back
	} else {
		window.location.href = "../index.html";
	}
	
}


</script>

<body>

<div class="navigationBox" style="transform:translate(0px,0px);" id="navBox"> <!-- CONTROL BOX -->
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<p style="font-family: sanscodeItalic;"> Comic Title </p>
	</div>
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<div class="poopbox" style="width:270px;">
			<a onclick='goHomeDeterminer()' style="font-size:12px;"> <-- go home </a>
		</div>
	</div>
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<p> navigation </p>
	</div>

	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<div class="poopbox" style="width:240px;">
			<a onclick='goToPage(document.getElementById("pageJump").value - 1)' style="font-size:12px;"> jump to page </a>
		</div>
		<div class="poopbox" style="margin:auto;">
			<input type="number" id="pageJump" name="pageJump" style="width: 66px;" min="1">
		</div>
	</div>
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<div class="poopbox" style="width:270px;">
			<a onclick='goToPage(0)' style="font-size:12px;"> first page </a>
		</div>
	</div>
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<div class="poopbox" style="width:270px;">
			<a onclick='goToPage(amountOfPages)' style="font-size:12px;"> last page </a>
		</div>
	</div>
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<div class="poopbox" style="width:270px;">
			<a onclick='goToPage(Math.floor(Math.random() * amountOfPages))' style="font-size:12px;"> random page </a>
		</div>
	</div>
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<p> settings </p>
	</div>
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<div class="poopbox" style="width:270px;">
			<a onclick='toggleFitWidth()' style="font-size:12px;"> toggle page fit </a>
		</div>
	</div>
	
	<div class="poopbox" style="height:24px;display:flex;padding:4px;">
		<div class="poopbox" style="width:270px;">
			<a onclick='toggleFilter()' style="font-size:12px;"> toggle anti-aliasing </a>
		</div>
	</div>

</div>


<div class="mainBodyBox" style="display:block;margin:auto;">
	
	
	<div class="comicbox" > <!-- comic img -->
		<img src="" id="comicImage" style="height:720px;">
	</div>
	
	<div class="comicbox" style="margin-top:7px;height:20px;display:flex;min-height: 50px;position:sticky;bottom:0;"> <!-- move box -->
		
		<div class="poopbox"></div>
		<div class="poopbox"><a onclick='lastPage()'> BACK PAGE </a></div>	
		<div class="poopbox"><p id="pageNumberText"> page 1 / 3 </p></div>
		<div class="poopbox"><a onclick='nextPage()'> NEXT PAGE</a></div>
		<div class="poopbox"></div>
	
	</div>
	
</div>



</body>
</html>